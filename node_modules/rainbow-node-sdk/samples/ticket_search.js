var NodeSDK = require("../index");

var nodeSDK = new NodeSDK({
    rainbow: {
        "host": "sandbox.openrainbow.com",
        "mode": "xmpp"
    },
    credentials: {
        "login": "",
        "password": ""
    },
    application: {
        "appID": "",
        "appSecret": ""
    },
    logs: {
        enableConsoleLogs: true,
        enableFileLogs: false,
        file: {
            path: "/var/tmp/rainbowsdk/",
            level: "debug"
        }
    },
    im: {
        sendReadReceipt: false  //false to not send a read receipt automatically
    }
});

nodeSDK.events.on("rainbow_onready", () => {

    console.log("[Rainbow] >>> READY", nodeSDK.state);

    /*
    nodeSDK.contacts.getContactByLoginEmail("junaid.ali@amigo-software.com").then((user) => {
        console.log("[Rainbow] >>> Found", user);
    }).catch((err) => {
        console.log("[Rainbow] >>> User not found", err);
    });

    let rosters = nodeSDK.contacts.getAll();
    console.log("[Rainbow] >>> Roster", rosters);
    */
    
    /*
    nodeSDK.contacts.getContactById("570e12812d768e9b52a8b702").then((user) => {
        console.log("[Rainbow] >>> Roster by ID", user);
    }).catch((err) => {
        console.log("[Rainbow] >>> User not created", err);
    });
    */

    /*
    nodeSDK.contacts.getContactByLoginEmail("manguenot@rainbowhub.com").then((user) => {
        console.log("[Rainbow] >>> contact same company by email", user);
    }).catch((err) => {
        console.log("[Rainbow] >>> Error", err);
    });
    */

    /*
    nodeSDK.contacts.getContactById("59f0d5ca7adcbf344239dcd0").then((user) => {
        console.log("[Rainbow] >>> Contact same company by ID", user);
    }).catch((err) => {
        console.log("[Rainbow] >>> Error", err);
    });
    */
    
    
    nodeSDK.contacts.getContactByJid("896d5a45fe4a43c7a0483082690fd8d3@sandbox-all-in-one-prod-1.opentouch.cloud").then((user) => {
        console.log("[Rainbow] >>> Contact same company by Jid", user);
    }).catch((err) => {
        console.log("[Rainbow] >>> Error", err);
    });
    
});

nodeSDK.start().then( () => {
    console.log("[Rainbow] >>> STARTED", nodeSDK.state);
});
